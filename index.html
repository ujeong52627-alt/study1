<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆë“± ë¬¸í•´ë ¥ í•™ìŠµ - ì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€, ê²½ë³µì´</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* [ê¸°ë³¸ ì„¤ì •] */
        * { box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        :root {
            --primary-blue: #1e7df0;
            --sky-blue: #00b0ff;
            --text-dark: #333;
            --text-gray: #666;
            --bg-gray: #f2f2f2; /* ë°°ê²½ìƒ‰ */
            --title-bg: #e9ecef;
            /* Pastel Banner Colors */
            --b-green: #a5d6a7; --b-yellow: #fff59d; --b-orange: #ffcc80;
            --b-blue: #90caf9; --b-purple: #ce93d8; --b-teal: #80cbc4;
            --b-brown: #bcaaa4; --b-lime: #e6ee9c; --b-sky: #81d4fa; --b-gold: #ffe082;
        }
        body { 
            margin: 0; padding: 0; 
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif; 
            background-color: var(--bg-gray); 
            height: 100vh; 
            height: 100dvh; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }
        /* [ì•± ì»¨í…Œì´ë„ˆ] */
        #app-container {
            width: 1200px; 
            height: 800px; 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
            position: relative; 
        }
        /* [í—¤ë” & íƒ­] */
        header {
            height: 60px; 
            border-bottom: 3px solid #3b82f6; 
            display: flex; 
            align-items: center; 
            padding: 0 30px; 
            justify-content: space-between; 
            background: white; 
            z-index: 10; 
            flex-shrink: 0; 
        }
        .logo { font-size: 24px; font-weight: bold; color: #374151; }
        .logo span { color: #2563eb; }
        .file-info { color: #9ca3af; font-size: 14px; }
        .tabs {
            display: flex; 
            background-color: #f3f4f6; 
            padding: 10px 30px 0; 
            border-bottom: 1px solid #e5e7eb; 
            gap: 5px; 
            flex-shrink: 0; 
        }
        .tab-btn {
            padding: 12px 25px; 
            border-radius: 12px 12px 0 0; 
            border: none; 
            cursor: pointer; 
            font-weight: bold; 
            color: white; 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            opacity: 0.7; 
            transition: all 0.2s; 
            transform: translateY(5px); 
            font-size: 16px; 
        }
        .tab-btn.active { opacity: 1; transform: translateY(0); box-shadow: 0 -2px 5px rgba(0,0,0,0.05); }
        .tab-vocab { background-color: #9333ea; }
        .tab-read { background-color: #3b82f6; }
        .tab-structure { background-color: #1d4ed8; }
        .tab-write { background-color: #4f46e5; }
        /* [ì½˜í…ì¸  ê³µí†µ] */
        .content-area {
            flex-grow: 1; 
            position: relative; 
            overflow: hidden; 
            background-color: transparent; 
            padding-bottom: 0; 
            display: flex; 
            flex-direction: column; 
        }
        
        .screen {
            display: none; 
            width: 100%; 
            height: 100%; 
            position: relative; 
            animation: fadeIn 0.3s ease-out; 
            flex-direction: column; 
            padding-bottom: 60px; 
        }
        .screen.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            60% { transform: translateX(-5px); }
            80% { transform: translateX(5px); }
        }
        .center-wrapper {
            width: 100%; 
            max-width: 1200px; 
            margin: 0 auto; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            position: relative; 
            padding-bottom: 40px; 
        }
        /* [ëŒ€ì§€ì‹œë¬¸ ë°°ë„ˆ - ìŠ¤íƒ€ì¼ í†µì¼] */
        .instruction-banner {
            background-color: #16a34a; 
            color: white; 
            padding: 15px 30px; 
            margin: 20px 30px 10px; 
            border-radius: 15px; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
            font-size: 20px; 
            flex-shrink: 0; 
            font-weight: bold; 
        }
        .sub-badge {
            background-color: rgba(255,255,255,0.2); 
            padding: 5px 12px; 
            border-radius: 20px; 
            font-size: 14px; 
            display: flex; 
            align-items: center; 
            gap: 5px; 
            margin-left: auto; 
        }
        /* [í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜] */
        .nav-controls {
            position: absolute; 
            bottom: 30px; 
            left: 30px; 
            right: 30px; 
            display: flex; 
            justify-content: space-between; 
            pointer-events: none; 
            z-index: 50; 
        }
        .nav-btn {
            width: 60px; 
            height: 60px; 
            border-radius: 50%; 
            background-color: #facc15; 
            border: none; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
            cursor: pointer; 
            pointer-events: auto; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            transition: all 0.2s; 
        }
        .nav-btn:hover { transform: scale(1.1); background-color: #fbbf24; }
        .nav-btn:disabled {
            background-color: #e5e7eb; 
            color: #9ca3af; 
            cursor: not-allowed; 
            transform: none; 
            box-shadow: none; 
        }
        /* [í˜ì´ì§€ í‘œì‹œ ì ] */
        .dots-indicator {
            background: transparent; 
            padding: 10px 25px; 
            border-radius: 30px; 
            display: flex; 
            gap: 12px; 
            border: none; 
            pointer-events: auto; 
            align-items: center; 
            box-shadow: none; 
            position: relative; 
            top: 20px; 
        }
        .dot { 
            width: 14px; height: 14px; 
            border-radius: 50%; 
            background-color: #d1d5db; 
            transition: background-color 0.3s; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .dot.active { background-color: #ef4444; }
        /* [ë©”ì¸ í™ˆ í™”ë©´ ìŠ¤íƒ€ì¼] */
        .home-bg {
            background-color: #f5f6f8; 
            justify-content: center; 
            align-items: center; 
            position: absolute; 
            top: 0; left: 0; height: 100%; width: 100%; 
            z-index: 100; 
            padding: 0; 
        }
        
        .dashboard-container { 
            width: 100%; height: 100%; 
            background: white; 
            overflow: hidden; position: relative; 
            display: flex; flex-direction: column; 
        }
        /* GNB */
        .gnb { 
            background-color: #2b2b2b; height: 64px; 
            display: flex; align-items: center; padding: 0 30px; 
            color: #aaa; font-size: 15px; font-weight: 500; flex-shrink: 0; 
        }
        .gnb-logo { font-weight: 900; font-size: 26px; margin-right: 40px; letter-spacing: -1px; cursor: pointer; }
        .logo-eli { color: #ff9800; } .logo-high { color: #00b0ff; }
        .gnb-menu { display: flex; gap: 12px; flex: 1; height: 100%; } 
        .gnb-item { 
            cursor: pointer; height: 100%; display: flex; align-items: center; 
            padding: 0 12px; 
            border-bottom: 4px solid transparent; transition: all 0.2s; 
            white-space: nowrap; 
        }
        .gnb-item.active { color: white; font-weight: 800; border-bottom: 4px solid white; }
        .gnb-item:hover { color: #fff; }
        /* ëŒ€ì‹œë³´ë“œ ê·¸ë¦¬ë“œ */
        .dashboard-content { flex: 1; background-color: #f5f6f8; padding: 20px; overflow-y: auto; }
        .dashboard-grid { display: grid; grid-template-columns: 200px 1fr 320px; gap: 20px; height: 100%; min-height: 540px; }
        /* Left Column */
        .left-sidebar { display: flex; flex-direction: column; gap: 20px; height: 100%; }
        .subject-menu-box { 
            background: #e0f2f1; border-radius: 12px; overflow: hidden; border: 1px solid #b2dfdb; flex-grow: 1; 
            display: flex; flex-direction: column; 
        }
        .subject-header { padding: 15px; font-weight: 800; font-size: 16px; color: #00695c; border-bottom: 1px solid #b2dfdb; display: flex; justify-content: space-between; align-items: center; }
        .subject-list { display: flex; flex-direction: column; flex: 1; }
        .subject-item { padding: 15px 20px; font-weight: 700; color: #004d40; cursor: pointer; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid rgba(0,0,0,0.05); transition: background 0.2s; flex: 1; }
        .subject-item:hover { background: #b2dfdb; }
        .subject-icon { font-size: 18px; width: 24px; text-align: center; }
        .story-banner { 
            background: #80deea; border-radius: 12px; padding: 20px; color: #006064; 
            text-align: center; font-weight: 700; cursor: pointer; 
            box-shadow: 0 4px 10px rgba(0,188,212,0.1); height: 120px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
        }
        .story-title { font-size: 20px; margin-bottom: 5px; line-height: 1.3; }
        .story-sub { font-size: 13px; opacity: 0.8; }
        /* Center Column */
        .center-feed { display: flex; flex-direction: column; gap: 20px; height: 100%; }
        
        .hero-banner { 
            background: #fff3e0; border-radius: 15px; height: 240px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            text-align: center; border: 1px solid #ffe0b2; position: relative; overflow: hidden; flex-shrink: 0; 
            cursor: pointer; transition: transform 0.2s; 
        }
        .hero-banner:hover { transform: scale(1.02); box-shadow: 0 10px 20px rgba(255, 152, 0, 0.2); }
        .hero-bg-pattern { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: radial-gradient(#ffcc80 1px, transparent 1px); background-size: 20px 20px; opacity: 0.2; }
        .hero-content { position: relative; z-index: 1; pointer-events: none; }
        .hero-tag { background: #ffcc80; color: #5d4037; padding: 5px 15px; border-radius: 20px; font-weight: 700; font-size: 14px; margin-bottom: 15px; display: inline-block; }
        .hero-main-title { font-size: 32px; font-weight: 900; color: #3e2723; margin-bottom: 10px; line-height: 1.2; }
        .hero-sub-title { font-size: 18px; color: #5d4037; font-weight: 600; }
        .diagnostic-trigger-banner { 
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); border: 3px dashed #1e7df0; 
            border-radius: 15px; height: 140px; display: flex; align-items: center; justify-content: space-between; 
            padding: 0 40px; cursor: pointer; position: relative; 
            box-shadow: 0 8px 20px rgba(30,125,240,0.15); transition: transform 0.2s; flex-shrink: 0; 
        }
        .diag-text-group { text-align: left; }
        .diag-sub { font-size: 16px; color: #1565c0; font-weight: 700; margin-bottom: 5px; }
        .diag-title { font-size: 26px; font-weight: 900; color: #0d47a1; letter-spacing: -0.5px; }
        .diag-icon-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; transform: translateY(-8px); }
        .diag-icon { font-size: 50px; line-height: 1; }
        .diag-badge { background: #ff5252; color: white; font-weight: 800; padding: 5px 12px; border-radius: 20px; font-size: 13px; margin-bottom: 8px; }
        .bottom-banner-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; height: 120px; flex-shrink: 0; }
        .sub-banner { 
            height: 100%; border-radius: 12px; overflow: hidden; position: relative; 
            display: flex; flex-direction: column; justify-content: center; padding: 20px; 
            color: #333; font-weight: 700; cursor: pointer; transition: transform 0.2s; 
        }
        .sb-1 { background: linear-gradient(to right, #e1bee7, #ce93d8); color: #4a148c; }
        .sb-2 { background: linear-gradient(to right, #fff9c4, #fff59d); color: #f57f17; }
        .sb-title { font-size: 18px; margin-bottom: 5px; z-index: 1; }
        .sb-desc { font-size: 13px; font-weight: 400; opacity: 0.9; z-index: 1; }
        .sb-img { position: absolute; right: 10px; bottom: 10px; font-size: 40px; opacity: 0.5; }
        /* Right Column */
        .right-sidebar { display: flex; flex-direction: column; height: 100%; gap: 20px; }
        .plus-box { background: white; border-radius: 12px; padding: 20px; border: 1px solid #eee; flex-shrink: 0; }
        .widget-title { font-size: 16px; font-weight: 800; color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 5px; }
        .plus-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .plus-item { background: #f5f5f5; border-radius: 8px; padding: 10px; font-size: 13px; font-weight: 600; color: #555; display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .pi-icon { width: 24px; height: 24px; background: #fff; border-radius: 5px; display: flex; justify-content: center; align-items: center; font-size: 12px; border: 1px solid #ddd; }
        .app-grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: repeat(3, 1fr); gap: 10px; flex-grow: 1; }
        .app-card { 
            height: 100%; border-radius: 10px; padding: 10px; color: #333; font-weight: 700; font-size: 15px; 
            display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; 
            cursor: pointer; transition: transform 0.2s; box-shadow: 0 2px 5px rgba(0,0,0,0.05); line-height: 1.3; 
        }
        .bg-lime { background: var(--b-lime); color: #558b2f; } .bg-purple { background: var(--b-purple); color: #6a1b9a; }
        .bg-sky { background: var(--b-sky); color: #0277bd; } .bg-brown { background: var(--b-brown); color: #4e342e; }
        .bg-teal { background: var(--b-teal); color: #00695c; } .bg-gold { background: var(--b-gold); color: #ff6f00; }
        /* [í™”ë©´ ìŠ¤íƒ€ì¼: ì¸íŠ¸ë¡œ] */
        .intro-bg {
            background-image: url('imgs/intro.png'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            position: absolute; top: 0; left: 0; height: 100%; width: 100%; 
        }
        .book-layout-container { width: 1000px; height: 500px; display: flex; position: relative; margin-bottom: 20px; }
        .book-left-page { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; padding-right: 20px; }
        .book-right-page { flex: 1; }
        .intro-badge { background-color: #fde047; color: #111; padding: 10px 30px; border-radius: 30px; font-size: 20px; font-weight: 800; margin-bottom: 35px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .intro-main-title { color: #1f2937; font-size: 45px; font-weight: 900; text-align: center; line-height: 1.3; letter-spacing: -1px; text-shadow: none; }
        .intro-top-text { position: absolute; top: 25px; left: 30px; font-size: 22px; color: #ffffff; font-weight: bold; z-index: 20; }
        .start-btn { background-color: transparent; border: none; box-shadow: none; padding: 0; color: transparent; background-image: url('imgs/btn_start.png'); background-size: contain; background-repeat: no-repeat; background-position: center; width: 300px; height: 90px; cursor: pointer; transition: transform 0.2s; }
        .start-btn:hover { transform: scale(1.05); background-color: transparent; }
        /* [í™”ë©´ ìŠ¤íƒ€ì¼: ì•„ì›ƒíŠ¸ë¡œ] */
        .outro-bg { background: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%); justify-content: center; align-items: center; text-align: center; position: absolute; top: 0; left: 0; height: 100%; }
        .outro-icon { font-size: 100px; margin-bottom: 20px; animation: bounce 2s infinite; }
        .outro-title { font-size: 48px; font-weight: 900; color: #1e40af; margin-bottom: 20px; }
        .outro-desc { font-size: 24px; color: #374151; margin-bottom: 50px; }
        .replay-btn { background-color: #f59e0b; color: white; font-size: 24px; font-weight: bold; padding: 15px 50px; border-radius: 40px; border: none; cursor: pointer; box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3); transition: transform 0.2s; display: flex; align-items: center; gap: 10px; }
        .replay-btn:hover { transform: scale(1.05); }
        /* [ì–´íœ˜ë‘] */
        #vocab-screen { background-image: url('imgs/back.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; }
        .vocab-container { padding: 0 40px; flex-grow: 1; display: flex; align-items: center; justify-content: center; gap: 20px; }
        .header-star-wrapper { position: absolute; top: 0px; right: 0; width: auto; display: flex; gap: 8px; z-index: 10; }
        .header-star-img { width: 30px; height: 30px; object-fit: contain; }
        .vocab-card { background: #fce7f3; border: 5px solid #f45d8b; border-radius: 40px; padding: 20px 40px; width: 100%; max-width: 900px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); display: flex; flex-direction: column; position: relative; margin-bottom: 30px; margin-top: 40px; }
        .vocab-arrow-btn { background: #3b82f6; border: none; cursor: pointer; color: white; transition: transform 0.2s; padding: 15px; border-radius: 50%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .vocab-arrow-btn:hover { transform: scale(1.1); }
        .vocab-arrow-btn:disabled { background: #e5e7eb; color: #9ca3af; cursor: not-allowed; transform: none; box-shadow: none; }
        .vocab-main-title { text-align: center; font-size: 60px; font-weight: 900; color: #1f2937; margin-bottom: 5px; }
        .hanja-box { background: transparent; padding: 5px; display: flex; justify-content: center; align-items: center; gap: 20px; margin-bottom: 15px; }
        .hanja-item { display: flex; align-items: center; gap: 10px; font-size: 32px; color: #4b5563; }
        .hanja-reveal { background-color: #3b82f6; color: white; padding: 5px 20px; border-radius: 10px; cursor: pointer; transition: 0.3s; min-width: 80px; text-align: center; font-size: 20px; }
        .hanja-reveal.revealed { background-color: #dbeafe; color: #1e40af; font-weight: bold; }
        .vocab-bottom-layout { display: flex; gap: 30px; border: 3px dashed #fda4af; border-radius: 20px; padding: 20px; background-color: #fff7ed; align-items: center; width: 100%; }
        .vocab-img-placeholder { width: 240px; height: 180px; background: white; border-radius: 15px; border: 2px solid #fed7aa; display: flex; justify-content: center; align-items: center; overflow: hidden; flex-shrink: 0; }
        .vocab-text-area { flex-grow: 1; display: flex; flex-direction: column; gap: 15px; justify-content: center; overflow: hidden; }
        .vocab-row { display: flex; align-items: center; gap: 20px; } 
        .vocab-label { background-color: #374151; color: white; padding: 8px 0; border-radius: 10px; font-weight: bold; font-size: 20px; width: 80px; text-align: center; flex-shrink: 0; }
        .vocab-label.ex { background-color: #374151; }
        .vocab-desc { font-size: 20px; color: #374151; font-weight: 500; line-height: 1.5; display: flex; align-items: center; gap: 10px; flex-wrap: nowrap; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .highlight-word { color: #2563eb; font-weight: 900; }
        .speaker-img-btn { width: 32px; height: 32px; cursor: pointer; vertical-align: middle; transition: transform 0.2s; margin: 4px 8px; }
        .speaker-img-btn:hover { transform: scale(1.2); }
        .vocab-next-arrow, .vocab-prev-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; color: #1ca7a0; transition: transform 0.2s; z-index: 20; padding: 0; }
        .vocab-next-arrow svg, .vocab-prev-arrow svg { width: 70px; height: 70px; stroke-width: 4px; }
        .vocab-next-arrow { right: -80px; }
        .vocab-prev-arrow { left: -80px; }
        .vocab-next-arrow:hover, .vocab-prev-arrow:hover { transform: translateY(-50%) scale(1.1); }
        /* ê²Œì„ */
        .game-bg { background-color: #ecfeff; padding: 20px 20px 100px; display: flex; flex-direction: column; align-items: center; justify-content: center; flex-grow: 1; }
        .claw-machine { width: 600px; height: 450px; background: linear-gradient(to bottom, #60a5fa, #3b82f6); border-radius: 30px 30px 0 0; border: 6px solid #1d4ed8; position: relative; display: flex; flex-direction: column; margin-bottom: 30px; box-shadow: 0 15px 30px rgba(0,0,0,0.2); overflow: hidden; }
        .machine-window { background: rgba(255,255,255,0.3); flex-grow: 1; margin: 15px; border-radius: 15px; border: 3px solid rgba(255,255,255,0.6); position: relative; overflow: hidden; }
        .quiz-board { background: white; border: 3px solid #bfdbfe; border-radius: 30px; padding: 10px 20px; position: absolute; top: 20px; left: 50%; transform: translateX(-50%); font-size: 20px; font-weight: bold; color: #1e3a8a; z-index: 10; width: 90%; text-align: center; box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
        .quiz-blank { display: inline-block; width: 60px; height: 30px; line-height: 30px; background: #e2e8f0; border-radius: 8px; vertical-align: middle; margin: 0 5px; color: #2563eb; }
        .claw-arm { width: 8px; height: 50px; background: #94a3b8; position: absolute; top: 0; left: 50%; transform: translateX(-50%); transition: height 1s; z-index: 5; }
        .claw-hand { width: 36px; height: 28px; border: 4px solid #94a3b8; border-top: none; border-radius: 0 0 15px 15px; position: absolute; bottom: -28px; left: -14px; }
        .dolls-area { position: absolute; bottom: 10px; width: 100%; display: flex; justify-content: space-around; }
        .doll-icon { font-size: 50px; filter: drop-shadow(0 3px 2px rgba(0,0,0,0.2)); }
        .doll-label { background: white; padding: 4px 10px; border-radius: 10px; font-weight: bold; margin-top: 2px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-size: 14px; color: #333; }
        /* ì½ê¸°ë‘ */
        #read-screen { background-image: url('imgs/back_read.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; }
        .reading-layout { padding: 0 40px; flex-grow: 1; display: flex; justify-content: center; align-items: center; }
        .text-container { width: 100%; max-width: 1050px; height: 500px; background: white; border-radius: 40px; border: 5px solid #e5e7eb; padding: 50px; overflow-y: auto; line-height: 2.2; font-size: 20px; color: #374151; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); position: relative; }
        .text-container::-webkit-scrollbar { width: 10px; }
        .text-container::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 5px; }
        .passage-image-wrapper { float: right; width: 350px; margin: 0 0 20px 40px; position: relative; z-index: 10; }
        .passage-image { width: 100%; height: auto; border-radius: 20px; object-fit: cover; }
        .read-done-btn { width: 200px; height: 53px; padding: 0; display: flex; justify-content: center; align-items: center; margin: 50px auto 0; background-color: #2563eb; color: white; border: none; border-radius: 40px; font-size: 20px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3); transition: 0.2s; clear: both; }
        .read-done-btn:hover { background-color: #1d4ed8; transform: translateY(-2px); }
        .key-sentence-bubble { display: none; position: relative; background-color: #fffbeb; border: 3px solid #fcd34d; border-radius: 20px; padding: 30px; margin: 30px auto 0; width: 90%; max-width: 800px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); animation: popUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .key-sentence-bubble::after { content: ''; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); border-width: 0 15px 15px; border-style: solid; border-color: #fcd34d transparent; display: block; width: 0; }
        .key-icon-circle { background: #fbbf24; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; justify-content: center; align-items: center; flex-shrink: 0; }
        @keyframes popUp { from { opacity: 0; transform: translateY(-20px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }
        /* í€´ì¦ˆ */
        .quiz-container { width: 100%; max-width: 1100px; margin: 0 auto; display: flex; gap: 30px; padding: 0; height: 100%; max-height: 550px; min-height: 500px; }
        .passage-preview { width: 40%; background: #f9fafb; padding: 30px; border-radius: 20px; overflow-y: auto; font-size: 16px; line-height: 1.8; color: #6b7280; border: 1px solid #e5e7eb; }
        .question-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .question-box { background: white; padding: 40px; border-radius: 30px; border: 3px solid #dbeafe; box-shadow: 0 10px 20px rgba(0,0,0,0.05); flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; }
        .q-tag { background: #2563eb; color: white; display: inline-block; padding: 8px 20px; border-radius: 20px; font-size: 16px; font-weight: bold; align-self: flex-start; margin-bottom: 20px; flex-shrink: 0; }
        .q-text { font-size: 20px; font-weight: bold; margin-bottom: 20px; color: #1f2937; line-height: 1.4; flex-shrink: 0; }
        .option-list { display: flex; flex-direction: column; gap: 10px; flex-grow: 0; }
        .option-item { padding: 15px; border: 2px solid #e5e7eb; border-radius: 15px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 15px; font-size: 16px; }
        .option-item:hover { background: #f3f4f6; border-color: #cbd5e1; }
        .option-item.selected { border-color: #2563eb; background: #eff6ff; color: #1e40af; font-weight: bold; }
        .option-item.correct { border-color: #16a34a; background: #dcfce7; color: #166534; }
        .option-item.wrong { border-color: #ef4444; background: #fee2e2; color: #991b1b; animation: shake 0.5s ease-in-out; }
        .explanation-box { background: #eff6ff; padding: 25px; border-radius: 15px; margin-top: 30px; border: 2px solid #bfdbfe; display: none; font-size: 18px; line-height: 1.6; }
        .explanation-box.show { display: block; animation: fadeIn 0.3s; }
        /* [êµ¬ì¡°ë‘ - ë¦¬ë‰´ì–¼ ìŠ¤íƒ€ì¼] */
        .structure-layout { padding: 0 40px 120px; height: calc(100% - 100px); display: flex; flex-direction: column; gap: 30px; }
        .structure-intro-bg { background-image: url('imgs/back3.png'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; position: relative; }
        .structure-title-banner { background: #a855f7; color: white; padding: 15px 40px; border-radius: 30px; font-size: 20px; font-weight: bold; margin-bottom: 40px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .structure-card { background: white; border: 5px solid #374151; border-radius: 40px; padding: 50px 80px; text-align: left; position: relative; max-width: 800px; width: 100%; box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .structure-card-header { position: absolute; top: -25px; left: 50%; transform: translateX(-50%); background: #374151; color: #facc15; padding: 10px 30px; border-radius: 25px; font-weight: bold; font-size: 18px; display: flex; align-items: center; gap: 10px; }
        .structure-main-title { font-size: 48px; font-weight: 900; color: #1e3a8a; margin: 30px 0 40px; text-align: center; }
        .structure-list { display: flex; flex-direction: column; gap: 20px; }
        .structure-item { display: flex; align-items: center; gap: 15px; font-size: 22px; color: #374151; }
        .structure-badge { background: #f97316; color: white; padding: 5px 15px; border-radius: 15px; font-size: 16px; font-weight: bold; }
        .structure-start-btn { margin-top: 50px; background: #2563eb; color: white; padding: 15px 60px; border-radius: 30px; font-size: 24px; font-weight: bold; border: none; cursor: pointer; box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3); transition: transform 0.2s; }
        .structure-start-btn:hover { transform: scale(1.05); }
        .formula-box { margin: 20px 40px 10px; display: flex; align-items: center; gap: 10px; font-size: 18px; color: #374151; font-weight: bold; }
        .formula-tag { background: #374151; color: #facc15; padding: 5px 15px; border-radius: 20px; display: flex; align-items: center; gap: 5px; }
        .formula-sub-tag { background: #f97316; color: white; padding: 2px 10px; border-radius: 10px; font-size: 14px; }
        /* Step 1: ê°œë… í•™ìŠµ (ê³ ì •í˜• & ìŠ¤í¬ë¡¤ ë°©ì§€) */
        .concept-container { 
            padding: 0 40px 100px; 
            display: flex; 
            flex-direction: column; 
            gap: 20px; 
            height: 100%; 
            overflow: hidden; /* [ìˆ˜ì •] ìŠ¤í¬ë¡¤ ë°©ì§€ */
        }
        .definition-row { display: flex; gap: 20px; align-items: stretch; height: 100px; min-height: 100px; }
        .def-label { background: #e5e7eb; width: 140px; border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: 800; color: #374151; flex-shrink: 0; }
        .def-content { flex: 1; background: #fff7ed; border: 3px solid #fed7aa; border-radius: 15px; display: flex; align-items: center; padding: 0 30px; cursor: pointer; position: relative; overflow: hidden; }
        .def-text { font-size: 20px; line-height: 1.5; color: #374151; font-weight: bold; display: none; width: 100%; }
        .def-placeholder { font-size: 30px; color: #f97316; font-weight: 900; width: 100%; text-align: center; }
        
        .example-section { display: flex; gap: 20px; flex: 1; min-height: 250px; margin-bottom: 20px; }
        .ex-label-vertical { background: #e5e7eb; width: 140px; border-radius: 15px; display: flex; justify-content: center; align-items: center; font-size: 24px; font-weight: 800; color: #374151; flex-shrink: 0; }
        .ex-cards-grid { flex: 1; display: flex; gap: 20px; }
        .ex-item { flex: 1; display: flex; flex-direction: column; gap: 10px; }
        .ex-img-box { flex: 1; background: white; border-radius: 15px; overflow: hidden; border: 1px solid #ddd; display: flex; align-items: center; justify-content: center; position: relative; }
        .ex-img-box img { width: 100%; height: 100%; object-fit: cover; padding: 0; }
        .ex-answer-box { height: 70px; background: #fffbeb; border: 3px solid #fcd34d; border-radius: 15px; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 18px; font-weight: 800; color: #1e3a8a; padding: 5px; text-align: center; word-break: keep-all; white-space: normal; }
        .ex-answer-box.revealed { background: white; border-color: #4ade80; color: #15803d; }
        /* Step 2: ë¹„êµí•˜ê¸° (ìŠ¤í¬ë¡¤ ì œê±° & ë†’ì´ ë§ì¶¤) */
        .compare-grid-container { 
            padding: 0 40px 20px; /* í•˜ë‹¨ íŒ¨ë”© ì¡°ì • */
            height: 100%; 
            display: flex; 
            flex-direction: column; 
            overflow: visible; /* ë“œë¡­ë‹¤ìš´ì„ ìœ„í•´ visible ì„¤ì • */
        }
        .compare-header-row { display: flex; margin-bottom: 10px; margin-top: 10px; flex-shrink: 0; }
        .ch-empty { width: 140px; }
        .ch-char { flex: 1; display: flex; align-items: center; justify-content: center; gap: 10px; font-size: 24px; font-weight: 900; color: #1f2937; }
        .char-face { width: 60px; height: 60px; border-radius: 50%; background: #ddd; overflow: hidden; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .char-face img { width: 100%; height: 100%; object-fit: cover; }
        .compare-table-wrapper {
            flex: 1; /* ë‚¨ì€ ê³µê°„ ëª¨ë‘ ì°¨ì§€ */
            display: flex; 
            flex-direction: column; 
            gap: 5px; 
            justify-content: space-evenly; /* í–‰ ê°„ê²© ê· ë“± ë¶„ë°° */
        }
        .cp-row { 
            display: flex; 
            flex: 1; /* ë†’ì´ ê· ë“± ë¶„ë°° */
            min-height: 70px; /* ìµœì†Œ ë†’ì´ ë³´ì¥ */
            max-height: 70px; /* ë„ˆë¬´ ì»¤ì§€ì§€ ì•Šê²Œ ì œí•œ */
            position: relative; 
            z-index: 1; /* ê¸°ë³¸ z-index */
        }
        
        /* ë“œë¡­ë‹¤ìš´ì´ ì—´ë ¸ì„ ë•Œ í•´ë‹¹ í–‰ì„ ì•ìœ¼ë¡œ ê°€ì ¸ì˜´ */
        .cp-row:has(.cp-dropdown-list.show) {
            z-index: 100;
        }
        .cp-label { width: 140px; background: #e5e7eb; border-radius: 10px; margin-right: 10px; display: flex; justify-content: center; align-items: center; font-size: 18px; font-weight: 800; color: #374151; flex-shrink: 0; }
        .cp-content { flex: 1; background: #fff7ed; border-radius: 10px; margin-right: 10px; display: flex; justify-content: center; align-items: center; font-size: 17px; font-weight: 600; text-align: center; border: 2px solid transparent; position: relative; }
        .cp-content.yellow { background: #fef9c3; margin-right: 0; }
        .cp-content.correct { background: #dcfce7; border-color: #22c55e; color: #15803d; }
        .cp-dropdown-btn { width: 100%; height: 100%; border: none; background: transparent; cursor: pointer; font-size: 24px; font-weight: bold; color: #9ca3af; }
        
        .cp-dropdown-list {
            position: absolute; top: 100%; left: 0; width: 100%; 
            background: white; border: 2px solid #3b82f6; border-radius: 8px; 
            z-index: 50; display: none; box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
            max-height: 200px; overflow-y: auto; 
        }
        
        /* ìœ„ìª½ìœ¼ë¡œ ì—´ë¦¬ëŠ” ë“œë¡­ë‹¤ìš´ */
        .cp-dropdown-list.drop-up {
            top: auto; 
            bottom: 100%; 
        }
        .cp-dropdown-list.show { display: block; }
        .cp-option { padding: 12px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 15px; color: #333; text-align: left; }
        .cp-option:hover { background: #eff6ff; }
        /* Step 3: ë¬¸ì¥ ì°¾ê¸° */
        .text-selection-area { padding: 0 40px 100px; display: flex; flex-direction: column; height: 100%; overflow-y: auto; }
        .target-banner { background: #ffedd5; border: 2px solid #fb923c; border-radius: 30px; padding: 10px 30px; align-self: center; margin-bottom: 20px; display: flex; gap: 20px; align-items: center; }
        .target-text { font-size: 20px; font-weight: 900; color: #9a3412; }
        .target-badge { background: #8b5cf6; color: white; padding: 4px 12px; border-radius: 15px; font-size: 14px; font-weight: bold; }
        .passage-box { background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 15px; padding: 30px; font-size: 20px; line-height: 2.2; color: #374151; overflow-y: auto; flex: 1; margin-bottom: 40px; }
        .selectable-sentence { cursor: pointer; padding: 2px 5px; border-radius: 4px; transition: 0.2s; }
        .selectable-sentence:hover { background: #dbeafe; }
        .selectable-sentence.correct { background: #fef08a; text-decoration: underline; text-decoration-color: #ef4444; text-decoration-thickness: 3px; font-weight: bold; }
        .selectable-sentence.wrong { animation: shake 0.4s; background: #fee2e2; }
        /* [ì“°ê¸°ë‘ - ë””ìì¸ ìˆ˜ì •] */
        .writing-container { padding: 0 40px; height: 100%; position: relative; display: flex; flex-direction: column; justify-content: center; }
        .writing-layout-box { display: flex; flex-direction: row; align-items: flex-start; justify-content: center; gap: 20px; width: 100%; margin-bottom: 30px; }
        .writing-card { background: white; border: 5px solid #fde047; border-radius: 40px; padding: 40px; width: 1000px; height: 400px; box-shadow: 0 20px 40px rgba(0,0,0,0.08); display: flex; flex-direction: column; position: relative; flex-shrink: 0; }
        .writing-side-buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 10px; }
        .circle-btn { width: 60px; height: 60px; border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; font-size: 14px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .circle-btn:hover { transform: scale(1.1); }
        .circle-btn.orange { background-color: #f97316; }
        .circle-btn.green { background-color: #84cc16; }
        .writing-input { flex-grow: 1; border: none; font-size: 24px; line-height: 1.8; color: #374151; outline: none; resize: none; font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif; }
        .writing-input::placeholder { color: #d1d5db; font-weight: normal; }
        .writing-input:focus::placeholder { color: transparent; }
        .done-btn-container { display: flex; justify-content: center; width: 100%; margin-top: 20px; margin-bottom: 50px; pointer-events: auto; }
        #vocab-done-container { position: absolute; top: 100%; margin-top: -20px; transform: translateX(300px); }
        .writing-done-btn { background-color: transparent; border: none; box-shadow: none; color: transparent; padding: 0; width: 200px; height: 53px; background-image: url('imgs/btn_active.png'); background-size: contain; background-repeat: no-repeat; background-position: center; cursor: pointer; transition: transform 0.2s; pointer-events: auto; }
        .writing-done-btn:disabled { background-image: url('imgs/btn_disabled.png'); cursor: not-allowed; transform: none !important; }
        .writing-done-btn:not(:disabled):hover { transform: scale(1.05); }
        .writing-done-btn:not(:disabled):active { transform: scale(0.95); }
        /* íŒì—… ëª¨ë‹¬ */
        .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 100; display: none; justify-content: center; align-items: center; }
        .modal-overlay.active { display: flex; }
        .modal-box { background: white; width: 700px; max-height: 80%; padding: 40px; border-radius: 25px; overflow-y: auto; position: relative; box-shadow: 0 25px 50px rgba(0,0,0,0.25); }
        .close-modal { position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 30px; cursor: pointer; color: #9ca3af; }
        /* ì“°ê¸°ë‘ ë°°ê²½ */
        #write-screen { background-image: url('imgs/back4.png'); background-size: cover; background-position: center; background-repeat: no-repeat; }
    </style>
</head>
<body>
    <div id="app-container">
        
        <div id="home-screen" class="screen active" style="position:absolute; top:0; left:0; width:100%; height:100%; background:#f5f6f8; z-index:1000; overflow:auto;">
            <div class="dashboard-container">
                <div class="gnb">
                    <div class="gnb-logo"><span class="logo-eli">eli</span><span class="logo-high">high</span></div>
                    <div class="gnb-menu">
                        <div class="gnb-item">ì „ì²´</div>
                        <div class="gnb-item">ë‚˜ì˜í•™ìŠµë°©</div>
                        <div class="gnb-item active">í•™êµê³µë¶€</div>
                        <div class="gnb-item">ìˆ˜í•™ì •ë³µ</div>
                        <div class="gnb-item">ì˜ì–´ì™„ì„±</div>
                        <div class="gnb-item">íŠ¹ëª©Â·ê²½ì‹œ</div>
                        <div class="gnb-item">í‰ê°€ì„¼í„°</div>
                        <div class="gnb-item">ìˆ˜í–‰í‰ê°€+</div>
                        <div class="gnb-item">ê¸€ë¡œë²Œë¦¬ë”ì‹­</div>
                    </div>
                </div>
                <div class="dashboard-content">
                    <div class="dashboard-grid">
                        <div class="left-sidebar">
                            <div class="subject-menu-box">
                                <div class="subject-header">
                                    ğŸ¯ í•™êµê³µë¶€ <span style="font-size:12px; color:#888; font-weight:400;">ì´ˆ4 âˆ¨</span>
                                </div>
                                <div class="subject-list">
                                    <div class="subject-item"><span class="subject-icon">ğŸ“š</span> êµ­ì–´</div>
                                    <div class="subject-item"><span class="subject-icon">â—</span> ìˆ˜í•™</div>
                                    <div class="subject-item"><span class="subject-icon">ğŸ›ï¸</span> ì‚¬íšŒ</div>
                                    <div class="subject-item"><span class="subject-icon">ğŸ§ª</span> ê³¼í•™</div>
                                    <div class="subject-item"><span class="subject-icon">ğŸ”¤</span> ì˜ì–´</div>
                                </div>
                            </div>
                            <div class="story-banner">
                                <div class="story-title">ì˜¤ëŠ˜ë„<br>ì¶œê·¼í–ˆì–´ìš”!</div>
                                <div class="story-sub">ì½˜í…ì¸  ì œì‘ ìŠ¤í† ë¦¬ âœ‰ï¸</div>
                            </div>
                        </div>
                        <div class="center-feed">
                            <div class="hero-banner" onclick="goToTab('intro')">
                                <div class="hero-bg-pattern"></div>
                                <div class="hero-content">
                                    <div class="hero-tag">ë‹¨ë‹¨í•˜ê²Œ ë¬¸í•´ë ¥ ë‹¤ì§€ê¸°</div>
                                    <div class="hero-main-title">ì—˜ë¦¬í•˜ì´<br>ë¬¸í•´ë ¥ í–¥ìƒ í”„ë¡œì íŠ¸</div>
                                    <div class="hero-sub-title">ëª¨ë“  í•™ìŠµì˜ ë°‘ë°”íƒ•ì€ ë¬¸í•´ë ¥!</div>
                                </div>
                            </div>
                            <div class="diagnostic-trigger-banner">
                                <div class="diag-text-group">
                                    <div class="diag-sub">ì´ˆë“± ë¬¸í•´ë ¥, ì •í™•í•œ ì§„ë‹¨ìœ¼ë¡œ ì œëŒ€ë¡œ í‚¤ìš°ê¸°</div>
                                    <div class="diag-title">ì—˜ë¦¬í•˜ì´ <br> ë¬¸í•´ë ¥ M-KLT ì§„ë‹¨ ê²€ì‚¬</div>
                                </div>
                                <div class="diag-icon-wrapper">
                                    <div class="diag-badge">Click!</div>
                                    <div class="diag-icon">ğŸ“</div>
                                </div>
                            </div>
                            <div class="bottom-banner-row">
                                <div class="sub-banner sb-1">
                                    <div class="sb-title">ì˜ì–´ ì•ŒìŒ¤ì˜<br>ì›ë”ëœë“œ</div>
                                    <div class="sb-desc">ë³´ë¬¼ì´ ê°€ë“í•œ ì˜ì–´ ëª¨í—˜!</div>
                                    <div class="sb-img">ğŸ°</div>
                                </div>
                                <div class="sub-banner sb-2">
                                    <div class="sb-title">ëª…ë‘ ëª¨ë“œ<br>ON</div>
                                    <div class="sb-desc">ì¬ë¯¸ìˆëŠ” í•™êµìƒí™œ íŒ</div>
                                    <div class="sb-img">ğŸ˜„</div>
                                </div>
                            </div>
                        </div>
                        <div class="right-sidebar">
                            <div class="plus-box">
                                <div class="widget-title">ğŸ”” í•™êµê³µë¶€ PLUS+</div>
                                <div class="plus-grid">
                                    <div class="plus-item"><span class="pi-icon">ğŸ‡¨ğŸ‡³</span> HSK</div>
                                    <div class="plus-item"><span class="pi-icon">ğŸ“œ</span> í•œêµ­ì‚¬</div>
                                    <div class="plus-item"><span class="pi-icon">ğŸ‰</span> í•œìì‹œí—˜</div>
                                    <div class="plus-item"><span class="pi-icon">ğŸ“º</span> êµê³¼íŠ¹ê°•</div>
                                    <div class="plus-item"><span class="pi-icon">ğŸ«</span> í•™êµìƒí™œ</div>
                                    <div class="plus-item"><span class="pi-icon">â›‘ï¸</span> ì•ˆì „ìƒí™œ</div>
                                </div>
                            </div>
                            <div class="app-grid">
                                <div class="app-card bg-lime">ë„ì „!<br>ì–´íœ˜ì™•</div>
                                <div class="app-card bg-purple">ë˜ë°•ë˜ë°•<br>í•œê¸€ì“°ê¸°</div>
                                <div class="app-card bg-sky">ì—˜ë¦¬ëª¬<br>ê°€ë‚˜ë‹¤</div>
                                <div class="app-card bg-brown">NEW<br>ì—˜ë¦¬ ë°›ì•„ì“°ê¸°</div>
                                <div class="app-card bg-teal">ë„ì „!<br>í•œìì™•</div>
                                <div class="app-card bg-gold">ì¹ êµ<br>ë°©íƒˆì¶œ</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <header id="app-header" style="display:none;">
            <div class="logo"><span>ë©”ê°€ìŠ¤í„°ë””</span> ì´ˆë“± ë¬¸í•´ë ¥</div>
            <div class="file-info">íŒŒì¼: 4ê°œì›” 2ì£¼ì°¨_ë¬¸í™”ìœ ì‚°</div>
        </header>
        <div id="app-tabs" class="tabs" style="display:none;">
            <button class="tab-btn tab-vocab" onclick="goToTab('vocab')">
                <i data-lucide="lightbulb" size="18"></i> ì–´íœ˜ë‘
            </button>
            <button class="tab-btn tab-read" onclick="goToTab('read')">
                <i data-lucide="book-open" size="18"></i> ì½ê¸°ë‘
            </button>
            <button class="tab-btn tab-structure" onclick="goToTab('structure')">
                <i data-lucide="layout" size="18"></i> êµ¬ì¡°ë‘
            </button>
            <button class="tab-btn tab-write" onclick="goToTab('write')">
                <i data-lucide="pen-tool" size="18"></i> ì“°ê¸°ë‘
            </button>
        </div>
        <div class="content-area">
            
            <div id="intro-screen" class="screen intro-bg">
                <div class="intro-top-text">[ì‘ìš©] 4ê°œì›” 2ì£¼ì°¨</div>
                <div class="book-layout-container">
                    <div class="book-left-page">
                        <div class="intro-badge">ë¬¸í™”ìœ ì‚°(1)</div>
                        <div class="intro-main-title">ì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€,<br>ê²½ë³µì´</div>
                    </div>
                    <div class="book-right-page"></div>
                </div>
                <button class="start-btn intro-start-btn-pos" onclick="startApp()">í•™ìŠµ ì‹œì‘í•˜ê¸°</button>
            </div>
            <div id="vocab-screen" class="screen">
                <div id="vocab-step-1" class="vocab-step" style="height: 100%; display: flex; flex-direction: column;">
                    <div class="center-wrapper">
                        <div class="instruction-banner">
                            <span>ë¹ˆì¹¸ì„ ëˆŒëŸ¬ ì´ë²ˆ ì‹œê°„ ì–´íœ˜ë¥¼ ì•Œì•„ë´…ì‹œë‹¤.</span>
                        </div>
                        
                        <div class="vocab-container" id="vocab-cards-container">
                            <div class="vocab-wrapper" style="position: relative; width: 100%; max-width: 900px; display: flex; flex-direction: column; align-items: center;">
                                <div class="header-star-wrapper">
                                    <img src="imgs/star_off.png" id="header-star-1" class="header-star-img" alt="ë³„1">
                                    <img src="imgs/star_off.png" id="header-star-2" class="header-star-img" alt="ë³„2">
                                </div>
                                <div class="vocab-card" id="vocab-card-1">
                                    <button class="vocab-next-arrow" onclick="nextVocabCard()">
                                        <i data-lucide="chevron-right"></i>
                                    </button>
                                    <div class="vocab-main-title">ê°€ì¹˜</div>
                                    <div class="hanja-box">
                                        <div class="hanja-item"><span>åƒ¹</span><div class="hanja-reveal" onclick="reveal(this, 'ê°’ ê°€', 1, 'https://placehold.co/audio.mp3')">?</div></div>
                                        <div style="font-size: 32px; color: #9ca3af;">+</div>
                                        <div class="hanja-item"><span>å€¤</span><div class="hanja-reveal" onclick="reveal(this, 'ê°’ ì¹˜', 1, 'https://placehold.co/audio.mp3')">?</div></div>
                                    </div>
                                    <div class="vocab-bottom-layout">
                                        <div class="vocab-img-placeholder">
                                            <img src="imgs/vocab1.jpg" alt="ê°€ì¹˜ ì´ë¯¸ì§€" style="width:100%; height:100%; object-fit:cover;">
                                        </div>
                                        <div class="vocab-text-area">
                                            <div class="vocab-row">
                                                <div class="vocab-label">ëœ»</div>
                                                <div class="vocab-desc">
                                                    <span>ì‚¬ë¬¼ì´ ì§€ë‹ˆê³  ìˆëŠ” ì“¸ëª¨.</span>
                                                    <img src="imgs/speaker.png" class="speaker-img-btn" onclick="playAudio('https://placehold.co/audio.mp3')" alt="ë“£ê¸°">
                                                </div>
                                            </div>
                                            <div class="vocab-row">
                                                <div class="vocab-label ex">ì˜ˆë¬¸</div>
                                                <div class="vocab-desc">
                                                    <span>ì´ ê·¸ë¦¼ì€ ì—­ì‚¬ì  <span class="highlight-word">ê°€ì¹˜</span>ê°€ ë†’ë‹¤.</span>
                                                    <img src="imgs/speaker.png" class="speaker-img-btn" onclick="playAudio('https://placehold.co/audio.mp3')" alt="ë“£ê¸°">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="vocab-card" id="vocab-card-2" style="display: none;">
                                    <button class="vocab-prev-arrow" onclick="prevVocabCard()">
                                        <i data-lucide="chevron-left"></i>
                                    </button>
                                    <div class="vocab-main-title">ë³´ì¡´</div>
                                    <div class="hanja-box">
                                        <div class="hanja-item"><span>ä¿</span><div class="hanja-reveal" onclick="reveal(this, 'ì§€í‚¬ ë³´', 2, 'https://placehold.co/audio.mp3')">?</div></div>
                                        <div style="font-size: 32px; color: #9ca3af;">+</div>
                                        <div class="hanja-item"><span>å­˜</span><div class="hanja-reveal" onclick="reveal(this, 'ìˆì„ ì¡´', 2, 'https://placehold.co/audio.mp3')">?</div></div>
                                    </div>
                                    <div class="vocab-bottom-layout">
                                        <div class="vocab-img-placeholder">
                                            <img src="imgs/vocab2.png" alt="ë³´ì¡´ ì´ë¯¸ì§€" style="width:100%; height:100%; object-fit:cover;">
                                        </div>
                                        <div class="vocab-text-area">
                                            <div class="vocab-row">
                                                <div class="vocab-label">ëœ»</div>
                                                <div class="vocab-desc">
                                                    <span><span class="highlight-yellow">ì˜ ë³´í˜¸í•˜ê³  ê°„ì§í•˜ì—¬</span> ë‚¨ê¹€.</span>
                                                    <img src="imgs/speaker.png" class="speaker-img-btn" onclick="playAudio('https://placehold.co/audio.mp3')" alt="ë“£ê¸°">
                                                </div>
                                            </div>
                                            <div class="vocab-row">
                                                <div class="vocab-label ex">ì˜ˆë¬¸</div>
                                                <div class="vocab-desc">
                                                    <span>ë¬¸í™”ì¬ë¥¼ ì˜ <span class="highlight-word">ë³´ì¡´</span>í•´ì•¼ í•œë‹¤.</span>
                                                    <img src="imgs/speaker.png" class="speaker-img-btn" onclick="playAudio('https://placehold.co/audio.mp3')" alt="ë“£ê¸°">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div id="vocab-done-container" class="done-btn-container" style="display:none;">
                                    <button id="vocab-done-btn" class="writing-done-btn" disabled onclick="finishVocabStep1()">ë‹¤ í–ˆì–´ìš”</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="vocab-step-2" class="vocab-step" style="display:none; height: 100%; flex-direction: column;">
                    <div class="center-wrapper">
                        <div class="instruction-banner">
                            <span>ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì–´íœ˜ë¥¼ ì°¾ì•„ ë¬¸ì¥ì„ ì™„ì„±í•´ ë´…ì‹œë‹¤.</span>
                        </div>
                        <div class="game-bg">
                            <div class="claw-machine">
                                <div class="quiz-board">ì´ ê·¸ë¦¼ì€ ì—­ì‚¬ì  <div class="quiz-blank">?</div> ì´/ê°€ ë†’ë‹¤.</div>
                                <div class="machine-window">
                                    <div class="claw-arm" id="claw-arm"><div class="claw-hand"></div></div>
                                    <div class="dolls-area">
                                        <button class="doll-btn" onclick="playGame(false)"><div class="doll-icon">ğŸ§¸</div><div class="doll-label">ë³´ì¡´</div></button>
                                        <button class="doll-btn" onclick="playGame(true)"><div class="doll-icon">ğŸ°</div><div class="doll-label">ê°€ì¹˜</div></button>
                                        <button class="doll-btn" onclick="playGame(false)"><div class="doll-icon">ğŸ¤–</div><div class="doll-label">ë¬¸í™”ìœ ì‚°</div></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="read-screen" class="screen">
                <div class="center-wrapper">
                    
                    <div id="read-step-1" class="read-step" style="height: 100%; display: flex; flex-direction: column;">
                        <div class="instruction-banner">
                            <span>ê²½ë³µì´ì˜ ì˜ë¯¸ë¥¼ ìƒê°í•˜ë©° ã€Œì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€, ê²½ë³µì´ã€ë¥¼ ì½ì–´ ë´…ì‹œë‹¤.</span>
                        </div>
                        <div class="reading-layout">
                            <div class="text-container" id="passage-text">
                                <div style="display:flex; align-items:center; gap:15px; margin-bottom: 30px;">
                                    <img src="imgs/speaker.png" class="speaker-img-btn" style="width: 40px; height: 40px;" onclick="playAudio('https://placehold.co/audio.mp3')" alt="ì „ì²´ ë“£ê¸°">
                                    <h2 style="margin:0; font-size: 32px;">ì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€, ê²½ë³µì´</h2>
                                </div>
                                
                                <div class="passage-image-wrapper">
                                    <img src="imgs/read.png" class="passage-image" alt="ë³¸ë¬¸ ì´ë¯¸ì§€">
                                </div>
                                <p>ë¶ì•…ì‚° ì•„ë˜ ìë¦¬ ì¡ì€ ì¡°ì„ ì˜ ê¶ê¶, ê²½ë³µê¶ì€ ìˆ˜ë°± ë…„ ë™ì•ˆ ë°”ëŒê³¼ í–‡ì‚´ì„ ë§ìœ¼ë©° ì¡°ìš©íˆ ê·¸ ìë¦¬ë¥¼ ì§€ì¼œ ì™”ë‹¤. ê¶ê¶ì˜ ê¸°ì™€ë“¤ì€ ê°ì ìì‹ ì˜ ì´ì•¼ê¸°ë¥¼ í’ˆì€ ë“¯ ì€ì€í•˜ê²Œ ë°˜ì§ì˜€ë‹¤.</p>

<p>ì–´ëŠ ë‚  ë°¤, ì•„ì£¼ ì˜¤ëœ ì‹œê°„ ê·¸ ìë¦¬ë¥¼ ì§€ì¼œì˜¨ ê¸°ì™€, 'ê²½ë³µì´'ê°€ ê¸´ ì ì—ì„œ ê¹¨ì–´ë‚¬ë‹¤.</p>

<p>"ìœ¼ìŒ....... ì´ê²Œ ë¬´ìŠ¨ ì†Œë¦¬ì§€?"</p>

<p>"ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ìŒì•… ê³µì—° ì†Œë¦¬ì˜ˆìš”! ì°¸ ì¢‹ì£ ?"</p>

<p>ë‚¯ì„  ëª©ì†Œë¦¬ì— ê¹œì§ ë†€ë€ ê²½ë³µì´ê°€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ë³´ì, ë°˜ì§ë°˜ì§ ìœ¤ì´ ë‚˜ëŠ” ê¸°ì™€ í•˜ë‚˜ê°€ ê²½ë³µì´ë¥¼ ë°”ë¼ë³´ê³  ìˆì—ˆë‹¤.</p>

<p>"ë„ˆëŠ”...... ëˆ„êµ¬ë‹ˆ?"</p>

<p>"ì €ëŠ” 'ê¶ì´'ì˜ˆìš”. ëª‡ ë…„ ì „ ê²½ë³µê¶ì˜ ë‚¡ê³  ë§ê°€ì§„ ê¸°ì™€ë“¤ì„ ìˆ˜ë¦¬í•  ë•Œ ìƒˆë¡œ ì™”ì–´ìš”."</p>

<p>ê¶ì´ì˜ ë§ì— ê²½ë³µì´ê°€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ ë³´ë‹ˆ ìƒˆê²ƒì²˜ëŸ¼ ë°˜ì§ì´ëŠ” ê¸°ì™€ë“¤ì´ ê°€ì§€ëŸ°íˆ ë†“ì—¬ ìˆì—ˆë‹¤. ê²Œë‹¤ê°€ ë§ˆë‹¹ì—ì„œëŠ” í™”ë ¤í•œ ì¡°ëª…ê³¼ í•¨ê»˜ ê³µì—°ì´ í•œì°½ì´ì—ˆê³ , ìƒ‰ìƒ‰ì˜ ì˜·ì„ ì…ì€ ì‚¬ëŒë“¤ì´ ê³µì—°ì„ ì¦ê¸°ê³  ìˆì—ˆë‹¤.</p>

<p>"ì € ì‚¬ëŒë“¤ì€ ëˆ„êµ¬ì§€? ì¡°ì„  ì™•ì¡°ëŠ” ì´ë¯¸ ì˜¤ë˜ ì „ì— ëë‚¬ëŠ”ë°.......â€</p>

<p>ê²½ë³µì´ê°€ í˜¼ë€ìŠ¤ëŸ¬ìš´ í‘œì •ìœ¼ë¡œ ì¤‘ì–¼ê±°ë ¸ë‹¤.</p>

<p>â€œì™•ì¡°ëŠ” ìˆ˜ë°± ë…„ ì „ì— ëë‚¬ì§€ë§Œ, ìš°ë¦¬ ê¶ê¶ì´ ì§€ë‹Œ ê°€ì¹˜ì™€ ì—­ì‚¬ëŠ” ì•„ì§ë„ ì†Œì¤‘í•˜ê²Œ ë³´ì¡´ë˜ê³  ìˆì–´ìš”. ì§€ê¸ˆì€ ê¶ê¶ì´ ëª¨ë“  ì‚¬ëŒì—ê²Œ ì—´ë ¤ ìˆì–´ì„œ ì´ë ‡ê²Œ ë¬¸í™”ë¥¼ ì¦ê¸°ê¸° ì˜¤ê¸°ë„ í•˜ê³ ìš”. ìš°ë¦¬ê°€ ë¬¸í™”ìœ ì‚°ì„ ì˜ ì§€ì¼œ ì˜¨ ë•ë¶„ì´ì£ !â€</p>

<p>ê¶ê¶ì˜ ê°€ì¹˜ë¥¼ ì•Œì•„ ì£¼ëŠ” ì‚¬ëŒì´ ìˆë‹¤ëŠ” ë§ì— ê²½ë³µì´ì˜ ê°€ìŠ´ì´ ë‘ê·¼ê±°ë ¸ë‹¤.</p>

<p>â€˜ì˜¤ëœ ì ì—ì„œ ê¹¨ì–´ ë³´ë‹ˆ ì„¸ìƒì´ ë§ì´ ë³€í–ˆêµ¬ë‚˜. ì‹œê°„ì´ í˜ëŸ¬ë„ ìš°ë¦¬ì˜ ê°€ì¹˜ë¥¼ ì•Œì•„ ì£¼ëŠ” ì´ë“¤ì´ ìˆë‹¤ë‹ˆâ€¦â€¦. ìš°ë¦¬ ê¶ê¶ì˜ ê°€ì¹˜ê°€ ì˜¤ë˜ ì´ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ ì†Œì¤‘íˆ ì§€ì¼œì•¼ê² ì–´.â€™</p>

                                
                                <button class="read-done-btn" onclick="revealKeySentence()">
                                    <i data-lucide="check" size="24" style="vertical-align:middle; margin-right:8px;"></i> ë‹¤ ì½ì—ˆì–´ìš”
                                </button>
                                
                                <div id="key-bubble" class="key-sentence-bubble">
                                    <div style="display:flex; align-items:center; justify-content:center; gap:15px;">
                                        <div class="key-icon-circle"><i data-lucide="key" size="24"></i></div>
                                        <div style="text-align:left;">
                                            <div style="font-size:16px; font-weight:bold; color:#d97706; margin-bottom:5px;">ì¤‘ì‹¬ ë‚´ìš© ì™ì™!</div>
                                            <div style="font-size:22px; font-weight:bold; color:#1f2937; line-height:1.4;">
                                                ì‹œê°„ì´ í˜ëŸ¬ë„ ë¬¸í™”ìœ ì‚°ì˜ ê°€ì¹˜ëŠ” ë³€í•˜ì§€ ì•Šìœ¼ë©°,<br>ìš°ë¦¬ê°€ ì§€ì¼œ ë‚˜ê°€ì•¼ í•œë‹¤.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="height: 150px;"></div>
                            </div>
                        </div>
                    </div>
                    <div id="read-step-2" class="read-step" style="display:none; height: 100%; flex-direction: column;">
                        <div class="instruction-banner">
                            <span>ì§ˆë¬¸ì— ì•Œë§ì€ ë‹µì„ ì°¾ì•„ ëˆŒëŸ¬ ë´…ì‹œë‹¤.</span>
                        </div>
                        <div class="quiz-container">
                            <div class="passage-preview">
                                <strong style="font-size:20px; color:#111;">ì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€, ê²½ë³µì´</strong><br><br>
<p>ë¶ì•…ì‚° ì•„ë˜ ìë¦¬ ì¡ì€ ì¡°ì„ ì˜ ê¶ê¶, ê²½ë³µê¶ì€ ìˆ˜ë°± ë…„ ë™ì•ˆ ë°”ëŒê³¼ í–‡ì‚´ì„ ë§ìœ¼ë©° ì¡°ìš©íˆ ê·¸ ìë¦¬ë¥¼ ì§€ì¼œ ì™”ë‹¤. ê¶ê¶ì˜ ê¸°ì™€ë“¤ì€ ê°ì ìì‹ ì˜ ì´ì•¼ê¸°ë¥¼ í’ˆì€ ë“¯ ì€ì€í•˜ê²Œ ë°˜ì§ì˜€ë‹¤.</p>

<p>ì–´ëŠ ë‚  ë°¤, ì•„ì£¼ ì˜¤ëœ ì‹œê°„ ê·¸ ìë¦¬ë¥¼ ì§€ì¼œì˜¨ ê¸°ì™€, ê²½ë³µì´'ê°€ ê¸´ ì ì—ì„œ ê¹¨ì–´ë‚¬ë‹¤.</p>

<p>"ìœ¼ìŒ....... ì´ê²Œ ë¬´ìŠ¨ ì†Œë¦¬ì§€?"</p>

<p>"ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ìŒì•… ê³µì—° ì†Œë¦¬ì˜ˆìš”! ì°¸ ì¢‹ì£ ?"</p>

<p>ë‚¯ì„  ëª©ì†Œë¦¬ì— ê¹œì§ ë†€ë€ ê²½ë³µì´ê°€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ë³´ì, ë°˜ì§ë°˜ì§ ìœ¤ì´ ë‚˜ëŠ” ê¸°ì™€ í•˜ë‚˜ê°€ ê²½ë³µì´ë¥¼ ë°”ë¼ë³´ê³  ìˆì—ˆë‹¤.</p>

<p>"ë„ˆëŠ”...... ëˆ„êµ¬ë‹ˆ?"</p>

<p>"ì €ëŠ” 'ê¶ì´'ì˜ˆìš”. ëª‡ ë…„ ì „ ê²½ë³µê¶ì˜ ë‚¡ê³  ë§ê°€ì§„ ê¸°ì™€ë“¤ì„ ìˆ˜ë¦¬í•  ë•Œ ìƒˆë¡œ ì™”ì–´ìš”."</p>

<p>ê¶ì´ì˜ ë§ì— ê²½ë³µì´ê°€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ ë³´ë‹ˆ ìƒˆê²ƒì²˜ëŸ¼ ë°˜ì§ì´ëŠ” ê¸°ì™€ë“¤ì´ ê°€ì§€ëŸ°íˆ ë†“ì—¬ ìˆì—ˆë‹¤. ê²Œë‹¤ê°€ ë§ˆë‹¹ì—ì„œëŠ” í™”ë ¤í•œ ì¡°ëª…ê³¼ í•¨ê»˜ ê³µì—°ì´ í•œì°½ì´ì—ˆê³ , ìƒ‰ìƒ‰ì˜ ì˜·ì„ ì…ì€ ì‚¬ëŒë“¤ì´ ê³µì—°ì„ ì¦ê¸°ê³  ìˆì—ˆë‹¤.</p>

<p>"ì € ì‚¬ëŒë“¤ì€ ëˆ„êµ¬ì§€? ì¡°ì„  ì™•ì¡°ëŠ” ì´ë¯¸ ì˜¤ë˜ ì „ì— ëë‚¬ëŠ”ë°.......â€</p>

<p>ê²½ë³µì´ê°€ í˜¼ë€ìŠ¤ëŸ¬ìš´ í‘œì •ìœ¼ë¡œ ì¤‘ì–¼ê±°ë ¸ë‹¤.</p>

<p>â€œì™•ì¡°ëŠ” ìˆ˜ë°± ë…„ ì „ì— ëë‚¬ì§€ë§Œ, ìš°ë¦¬ ê¶ê¶ì´ ì§€ë‹Œ ê°€ì¹˜ì™€ ì—­ì‚¬ëŠ” ì•„ì§ë„ ì†Œì¤‘í•˜ê²Œ ë³´ì¡´ë˜ê³  ìˆì–´ìš”. ì§€ê¸ˆì€ ê¶ê¶ì´ ëª¨ë“  ì‚¬ëŒì—ê²Œ ì—´ë ¤ ìˆì–´ì„œ ì´ë ‡ê²Œ ë¬¸í™”ë¥¼ ì¦ê¸°ê¸° ì˜¤ê¸°ë„ í•˜ê³ ìš”. ìš°ë¦¬ê°€ ë¬¸í™”ìœ ì‚°ì„ ì˜ ì§€ì¼œ ì˜¨ ë•ë¶„ì´ì£ !â€</p>

<p>ê¶ê¶ì˜ ê°€ì¹˜ë¥¼ ì•Œì•„ ì£¼ëŠ” ì‚¬ëŒì´ ìˆë‹¤ëŠ” ë§ì— ê²½ë³µì´ì˜ ê°€ìŠ´ì´ ë‘ê·¼ê±°ë ¸ë‹¤.</p>

<p>â€˜ì˜¤ëœ ì ì—ì„œ ê¹¨ì–´ ë³´ë‹ˆ ì„¸ìƒì´ ë§ì´ ë³€í–ˆêµ¬ë‚˜. ì‹œê°„ì´ í˜ëŸ¬ë„ ìš°ë¦¬ì˜ ê°€ì¹˜ë¥¼ ì•Œì•„ ì£¼ëŠ” ì´ë“¤ì´ ìˆë‹¤ë‹ˆâ€¦â€¦. ìš°ë¦¬ ê¶ê¶ì˜ ê°€ì¹˜ê°€ ì˜¤ë˜ ì´ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ ì†Œì¤‘íˆ ì§€ì¼œì•¼ê² ì–´.â€™</p>

                            </div>
                            <div class="question-area">
                                <div class="question-box">
                                    <span class="q-tag">ë°°ê²½ ì´í•´</span>
                                    <div class="q-text">1. ì´ ì´ì•¼ê¸°ì˜ ë°°ê²½ìœ¼ë¡œ ê°€ì¥ ì•Œë§ì€ ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”?</div>
                                    <div class="option-list">
                                        <div class="option-item" onclick="checkQuiz(this, false)">â‘  ì¡°ì„  ì‹œëŒ€ì˜ ê¶ê¶ ì—°íšŒì¥</div>
                                        <div class="option-item" onclick="checkQuiz(this, true)">â‘¡ í˜„ëŒ€ì˜ ê²½ë³µê¶ ì•¼ê°„ ê³µì—°</div>
                                        <div class="option-item" onclick="checkQuiz(this, false)">â‘¢ ì‚°ì† ë¹„ë°€ ê¸°ì™€ ë§ˆì„</div>
                                        <div class="option-item" onclick="checkQuiz(this, false)">â‘£ ì˜¤ë˜ëœ íí—ˆ</div>
                                        <div class="option-item" onclick="checkQuiz(this, false)">â‘¤ ë¯¸ë˜ì˜ ë³µì› ê³µì‚¬ í˜„ì¥</div>
                                    </div>
                                    <div class="explanation-box" id="quiz-explanation">
                                        <strong>ğŸ’¡ ì •ë‹µ í•´ì„¤</strong><br>ê¸€ì—ì„œ 'ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ìŒì•… ê³µì—°', 'í™”ë ¤í•œ ì¡°ëª…'ì´ë¼ëŠ” í‘œí˜„ì´ ë‚˜ì˜¤ë¯€ë¡œ í˜„ëŒ€ì˜ ê²½ë³µê¶ì„ì„ ì•Œ ìˆ˜ ìˆì–´ìš”.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="structure-screen" class="screen" style="flex-direction:column; background:white;">
                <div id="structure-step-0" class="structure-step" style="height: 100%; display: flex; flex-direction: column;">
                    <div class="structure-intro-bg">
                        <div class="structure-title-banner">ê¸€ì„ ë” ê¹Šê²Œ ì½ëŠ” ë¹„ë°€ ì—´ì‡  'êµ¬ì¡°ë‘'</div>
                        <div class="structure-card">
                            <div class="structure-card-header">
                                <i data-lucide="lightbulb" size="20"></i> ì˜¤ëŠ˜ì˜ ë¬¸í•´ ê³µì‹
                            </div>
                            <h2 class="structure-main-title">'ìƒì§•' ì´í•´í•˜ê¸°</h2>
                            <div class="structure-list">
                                <div class="structure-item"><span class="structure-badge">ê°œë…</span> 'ìƒì§•'ì´ë€ ë¬´ì—‡ì¼ê¹Œìš”?</div>
                                <div class="structure-item"><span class="structure-badge">ì ìš©</span> ê¸€ ì† ê¸°ì™€ë“¤ì€ ë¬´ì—‡ì„ ë‚˜íƒ€ë‚¼ê¹Œìš”?</div>
                                <div class="structure-item"><span class="structure-badge">í›ˆë ¨</span> ê¸€ ì† ìƒì§•ì„ ì´í•´í•˜ë©° ì£¼ì œë¥¼ íŒŒì•…í•´ ë³´ì•„ìš”.</div>
                            </div>
                        </div>
                        <button class="structure-start-btn" onclick="changeStep(1)">ì‹œì‘í•˜ê¸°</button>
                    </div>
                </div>
                <div id="structure-step-1" class="structure-step" style="height:100%; display:none; flex-direction:column;">
                    <div class="instruction-banner">
                        <span>ë¹ˆì¹¸ì„ ëˆŒëŸ¬ 'ìƒì§•'ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.</span>
                    </div>
                    <div class="formula-box">
                        <div class="formula-tag"><i data-lucide="key" size="16"></i> ì˜¤ëŠ˜ì˜ ë¬¸í•´ ê³µì‹</div>
                        <div class="formula-sub-tag">ê°œë…</div>
                        <span>'ìƒì§•'ì´ë€ ë¬´ì—‡ì¼ê¹Œìš”?</span>
                    </div>
                    <div class="concept-container">
                        
                        <div class="definition-row">
                            <div class="def-label">ìƒì§•</div>
                            <div class="def-content" onclick="revealConceptDef(this)">
                                <div class="def-placeholder">?</div>
                                <div class="def-text">
                                    ëˆˆì— ë³´ì´ëŠ” í•˜ë‚˜ì˜ ëŒ€ìƒì—, ë” í° ì˜ë¯¸ë¥¼ ë‹´ì•„ í‘œí˜„í•˜ëŠ” ë°©ë²•.<br>
                                    â†’ ì‘ê°€ê°€ í•˜ë‚˜ì˜ ëŒ€ìƒì„ í†µí•´ ë” í° ìƒê°ì´ë‚˜ ì£¼ì œë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•.
                                </div>
                            </div>
                        </div>
                        <div class="example-section">
                            <div class="ex-label-vertical">ì˜ˆì‹œ</div>
                            
                            <div class="ex-cards-grid">
                                <div class="ex-item">
                                    <div class="ex-img-box"><img src="imgs/dove.png" alt="ë¹„ë‘˜ê¸°"></div>
                                    <div class="ex-answer-box" onclick="revealEx(this, 'ë¹„ë‘˜ê¸°<br>í‰í™”, í¬ë§')">?</div>
                                </div>
                                <div class="ex-item">
                                    <div class="ex-img-box"><img src="imgs/sprout.png" alt="ìƒˆì‹¹"></div>
                                    <div class="ex-answer-box" onclick="revealEx(this, 'ìƒˆì‹¹<br>ì‹œì‘, ì„±ì¥')">?</div>
                                </div>
                                <div class="ex-item">
                                    <div class="ex-img-box"><img src="imgs/candle.png" alt="ì´›ë¶ˆ"></div>
                                    <div class="ex-answer-box" onclick="revealEx(this, 'ì´›ë¶ˆ<br>í¬ë§, êº¼ì§€ì§€ ì•ŠëŠ” ë§ˆìŒ')">?</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="structure-step-2" class="structure-step" style="height:100%; display:none; flex-direction:column; overflow:visible;">
                    <div class="instruction-banner">
                        <span>ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ì°¾ì•„ ë‘ ê¸°ì™€ì˜ ë‹¤ë¥¸ ì ì„ ë¹„êµí•´ ë³´ê³ , ê°ê° ë¬´ì—‡ì„ ìƒì§•í•˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.</span>
                    </div>
                    <div class="formula-box">
                        <div class="formula-tag"><i data-lucide="key" size="16"></i> ì˜¤ëŠ˜ì˜ ë¬¸í•´ ê³µì‹</div>
                        <div class="formula-sub-tag" style="background:#f59e0b;">ì ìš©</div>
                        <span>ê¸€ ì† ê¸°ì™€ë“¤ì€ ë¬´ì—‡ì„ ë‚˜íƒ€ë‚¼ê¹Œìš”?</span>
                    </div>
                    <div class="compare-grid-container">
                        <div class="compare-header-row">
                            <div class="ch-empty"></div>
                            <div class="ch-char">
                                <div class="char-face"><img src="https://placehold.co/60x60/333/fff?text=GB" alt="ê²½ë³µ"></div> ê²½ë³µì´
                            </div>
                            <div class="ch-char">
                                <div class="char-face"><img src="https://placehold.co/60x60/d97706/fff?text=GU" alt="ê¶ì´"></div> ê¶ì´
                            </div>
                        </div>
                        <div class="compare-table-wrapper">
                            <div class="cp-row">
                                <div class="cp-label">ê²‰ëª¨ìŠµ</div>
                                <div class="cp-content">ì˜¤ë˜ë¨, ë‚¡ìŒ, ì€ì€í•¨</div>
                                <div class="cp-content yellow">ìƒˆê²ƒ, ë°˜ì§ë°˜ì§ ìœ¤ì´ ë‚¨</div>
                            </div>
                            <div class="cp-row">
                                <div class="cp-label">í•œ ì¼</div>
                                <div class="cp-content">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list">
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'ì˜¤ëœ ì„¸ì›” ë™ì•ˆ ê¶ê¶ì„ ì§€ì¼œì˜´')">ì˜¤ëœ ì„¸ì›” ë™ì•ˆ ê¶ê¶ì„ ì§€ì¼œì˜´</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ë‚¡ì€ ê²ƒì„ ëŒ€ì‹ í•´ ìƒˆë¡œ ì˜´</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ì‚¬ëŒë“¤ì„ ì•ˆë‚´í•˜ëŠ” ì—­í• </div>
                                    </div>
                                </div>
                                <div class="cp-content yellow">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list">
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ì˜¤ëœ ì„¸ì›” ë™ì•ˆ ê¶ê¶ì„ ì§€ì¼œì˜´</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'ë‚¡ì€ ê²ƒì„ ëŒ€ì‹ í•´ ìƒˆë¡œ ì˜´')">ë‚¡ì€ ê²ƒì„ ëŒ€ì‹ í•´ ìƒˆë¡œ ì˜´</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ê¶ê¶ì„ í™˜í•˜ê²Œ ë¹„ì¶° ì¤Œ</div>
                                    </div>
                                </div>
                            </div>
                            <div class="cp-row">
                                <div class="cp-label">ì•Œê³  ìˆëŠ” ê²ƒ</div>
                                <div class="cp-content">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list drop-up">
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'ê³¼ê±° ì¡°ì„  ì‹œëŒ€ì˜ ì¼ë“¤')">ê³¼ê±° ì¡°ì„  ì‹œëŒ€ì˜ ì¼ë“¤</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ê³µì—°</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ê²½ë³µê¶ì˜ ë¹„ë°€ í†µë¡œ</div>
                                    </div>
                                </div>
                                <div class="cp-content yellow">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list drop-up">
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ê³¼ê±° ì¡°ì„  ì‹œëŒ€ì˜ ì¼ë“¤</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ê³µì—°')">ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ê³µì—°</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ì¡°ì„  ì™•ì¡°ì˜ ìˆ¨ê²¨ì§„ ë³´ë¬¼</div>
                                    </div>
                                </div>
                            </div>
                            <div class="cp-row">
                                <div class="cp-label">ìƒì§•</div>
                                <div class="cp-content">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list drop-up">
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'ì „í†µê³¼ ì—­ì‚¬')">ì „í†µê³¼ ì—­ì‚¬</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">í˜„ëŒ€ì˜ ë³€í™”ì™€ ë…¸ë ¥</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ìì—°ê³¼ ìƒëª…</div>
                                    </div>
                                </div>
                                <div class="cp-content yellow">
                                    <button class="cp-dropdown-btn" onclick="toggleCpDrop(this)">?</button>
                                    <div class="cp-dropdown-list drop-up">
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ì „í†µê³¼ ì—­ì‚¬</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, true, 'í˜„ëŒ€ì˜ ë³€í™”ì™€ ë³´ì¡´ì„ ìœ„í•œ ë…¸ë ¥')">í˜„ëŒ€ì˜ ë³€í™”ì™€ ë³´ì¡´ì„ ìœ„í•œ ë…¸ë ¥</div>
                                        <div class="cp-option" onclick="checkCpAnswer(this, false)">ë¯¸ë˜ì˜ ê¸°ìˆ </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="structure-step-3" class="structure-step" style="height:100%; display:none; flex-direction:column;">
                    <div class="instruction-banner">
                        <span>ì œì‹œëœ ì˜ë¯¸ë¥¼ ìƒì§•í•˜ëŠ” ë¬¸ì¥ì„ ê¸€ ì†ì—ì„œ ì°¾ì•„ ëˆŒëŸ¬ ë´…ì‹œë‹¤.</span>
                    </div>
                    <div class="formula-box">
                        <div class="formula-tag"><i data-lucide="key" size="16"></i> ì˜¤ëŠ˜ì˜ ë¬¸í•´ ê³µì‹</div>
                        <div class="formula-sub-tag" style="background:#ea580c;">í›ˆë ¨</div>
                        <span>ê¸€ ì† ìƒì§•ì„ ì´í•´í•˜ë©° ì£¼ì œë¥¼ íŒŒì•…í•´ ë³´ì•„ìš”.</span>
                    </div>
                    <div class="text-selection-area">
                        <div class="target-banner">
                            <span class="target-text">ì „í†µ Â· ì—­ì‚¬ Â· ë¬¸í™”ìœ ì‚°ì˜ ê°€ì¹˜</span>
                            <span class="target-badge">ì •ë‹µ 2ê°œ</span>
                        </div>
                        <div class="passage-box">
                            <p>ì–´ëŠ ë‚  ë°¤, ì•„ì£¼ ì˜¤ëœ ì‹œê°„ ê·¸ ìë¦¬ë¥¼ ì§€ì¼œì˜¨ ê¸°ì™€, 'ê²½ë³µì´'ê°€ ê¸´ ì ì—ì„œ ê¹¨ì–´ë‚¬ë‹¤.</p>
                            <p>"ìœ¼ìŒ....... ì´ê²Œ ë¬´ìŠ¨ ì†Œë¦¬ì§€?"</p>
                            <p>"ìš”ì¦˜ ê¶ê¶ì—ì„œ ì—´ë¦¬ëŠ” ìŒì•… ê³µì—° ì†Œë¦¬ì˜ˆìš”! ì°¸ ì¢‹ì£ ?"</p>
                            <p>ë‚¯ì„  ëª©ì†Œë¦¬ì— ê¹œì§ ë†€ë€ ê²½ë³µì´ê°€ ì£¼ìœ„ë¥¼ ë‘˜ëŸ¬ë³´ì, ë°˜ì§ë°˜ì§ ìœ¤ì´ ë‚˜ëŠ” ê¸°ì™€ í•˜ë‚˜ê°€ ê²½ë³µì´ë¥¼ ë°”ë¼ë³´ê³  ìˆì—ˆë‹¤.</p>
                            <p style="text-align:center;">...ì¤‘ëµ...</p>
                            <span class="selectable-sentence" onclick="checkSentence(this, true)">"ì™•ì¡°ëŠ” ìˆ˜ë°± ë…„ ì „ì— ëë‚¬ì§€ë§Œ, ìš°ë¦¬ ê¶ê¶ì´ ì§€ë‹Œ ê°€ì¹˜ì™€ ì—­ì‚¬ëŠ” ì•„ì§ë„ ì†Œì¤‘í•˜ê²Œ ë³´ì¡´ë˜ê³  ìˆì–´."</span>
                            <br><br>
                            <span class="selectable-sentence" onclick="checkSentence(this, false)">"ì§€ê¸ˆì€ ê¶ê¶ì´ ëª¨ë“  ì‚¬ëŒì—ê²Œ ì—´ë ¤ ìˆì–´ì„œ ì´ë ‡ê²Œ ë¬¸í™”ë¥¼ ì¦ê¸°ëŸ¬ ì˜¤ê¸°ë„ í•˜ê³ ìš”."</span>
                            <br><br>
                            <span class="selectable-sentence" onclick="checkSentence(this, true)">"ìš°ë¦¬ ê¶ê¶ì´ ë¬¸í™”ìœ ì‚°ì„ ì˜ ì§€ì¼œ ì˜¨ ë•ë¶„ì´ì£ !"</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="write-screen" class="screen">
                <div class="center-wrapper">
                    <div class="instruction-banner">
                        <span>ã€Œì—­ì‚¬ë¥¼ í’ˆì€ ê¸°ì™€, ê²½ë³µì´ã€ì˜ ì£¼ì œë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì¨ ë´…ì‹œë‹¤.</span>
                    </div>
                    
                    <div class="writing-container">
                        <div class="writing-layout-box">
                            <div class="writing-card">
                                <textarea class="writing-input" 
                                    placeholder="'ê²½ë³µì´â€™ì™€ â€˜ê¶ì´â€™ê°€ ìƒì§•í•˜ëŠ” ê²ƒì„ ìƒê°í•˜ë©°, ì´ì•¼ê¸°ì˜ ì£¼ì œë¥¼ ì¨ ë³´ì„¸ìš”." 
                                    oninput="checkWriting(this)"></textarea>
                            </div>
                            <div class="writing-side-buttons">
                                <button class="circle-btn orange" onclick="openModal('fulltext')" title="ê¸€ ì „ë¬¸ ë³´ê¸°">
                                    <i data-lucide="book" size="24"></i>
                                </button>
                                <button class="circle-btn green" onclick="openModal('example')" title="ì˜ˆì‹œ ë‹µì•ˆ">
                                    <i data-lucide="lightbulb" size="24"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="done-btn-container">
                            <button id="write-done-btn" class="writing-done-btn" disabled onclick="finishWriting()">ë‹¤ í–ˆì–´ìš”</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="outro-screen" class="screen outro-bg">
                <div class="outro-icon">ğŸ‰</div>
                <div class="outro-title">ì°¸ ì˜í–ˆì–´ìš”!</div>
                <div class="outro-desc">ì˜¤ëŠ˜ì˜ í•™ìŠµì„ ëª¨ë‘ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.</div>
                <button class="replay-btn" onclick="goToTab('intro')">
                    <i data-lucide="rotate-ccw" size="24"></i> ë‹¤ì‹œ ê³µë¶€í•˜ê¸°
                </button>
            </div>
        </div>
        <div class="nav-controls">
            <button class="nav-btn" id="prev-btn" onclick="changeStep(-1)"><i data-lucide="chevron-left" color="#374151" size="32"></i></button>
            <div class="dots-indicator" id="dots-container"></div>
            <button class="nav-btn" id="next-btn" onclick="changeStep(1)" disabled><i data-lucide="chevron-right" color="#374151" size="32"></i></button>
        </div>
        <div class="modal-overlay" id="text-modal"><div class="modal-box"><button class="close-modal" onclick="closeModal('text-modal')">Ã—</button><h3>ì „ë¬¸ ë³´ê¸°</h3><p>...</p></div></div>
        <div class="modal-overlay" id="example-modal"><div class="modal-box"><button class="close-modal" onclick="closeModal('example-modal')">Ã—</button><h3>ì˜ˆì‹œ ë‹µì•ˆ</h3><div style="background:#fce7f3; padding:20px; border-radius:10px;">ì‹œê°„ì´ í˜ëŸ¬ë„ ë¬¸í™”ìœ ì‚°ì˜ ê°€ì¹˜ëŠ” ë³€í•˜ì§€ ì•Šìœ¼ë©°...</div></div></div>
    </div>
    <script>
        lucide.createIcons();
        let currentTab = 'home'; 
        let currentStep = 0; 
        let completedSteps = {}; 
        let currentVocabCard = 1; 
        const totalVocabCards = 2; 
        // ì˜¤ë””ì˜¤ ê°ì²´
        const audioPlayer = new Audio();
        const stepsConfig = {
            'intro': 1,
            'vocab': 2,
            'read': 2,
            'structure': 4, // 4ë‹¨ê³„ë¡œ ë³€ê²½
            'write': 1,
            'outro': 1 
        };
        function init() { updateUI(); }
        function playAudio(src, callback) {
            audioPlayer.src = src;
            audioPlayer.play();
            if (callback) {
                audioPlayer.onended = callback;
            } else {
                audioPlayer.onended = null;
            }
        }
        function goToTab(tabName) {
            currentTab = tabName;
            currentStep = 0;
            currentVocabCard = 1; 
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            if(tabName !== 'intro' && tabName !== 'outro' && tabName !== 'home') { 
                document.querySelector(`.tab-${tabName}`).classList.add('active'); 
            }
            
            if (tabName === 'vocab') {
                playAudio('https://placehold.co/audio_instruction.mp3');
            } else {
                audioPlayer.pause(); 
            }
            updateUI();
        }
        function startApp() { goToTab('vocab'); }
        function updateUI() {
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.vocab-step, .read-step, .structure-step').forEach(el => el.style.display = 'none');
            const header = document.getElementById('app-header');
            const tabs = document.getElementById('app-tabs');
            if (currentTab === 'home') {
                document.getElementById('home-screen').classList.add('active');
                if(header) header.style.display = 'none';
                if(tabs) tabs.style.display = 'none';
                document.querySelector('.nav-controls').style.display = 'none';
                return;
            } else {
                if(header) header.style.display = 'flex';
                if(tabs) tabs.style.display = 'flex';
            }
            const targetScreen = document.getElementById(
                currentTab === 'intro' ? 'intro-screen' : 
                currentTab === 'outro' ? 'outro-screen' : `${currentTab}-screen`
            );
            if (targetScreen) targetScreen.classList.add('active');
            if (currentTab === 'vocab') {
                document.getElementById(`vocab-step-${currentStep + 1}`).style.display = 'flex';
                if (currentStep === 0) {
                    showVocabCard(currentVocabCard);
                }
            }
            else if (currentTab === 'read') document.getElementById(`read-step-${currentStep + 1}`).style.display = 'flex';
            else if (currentTab === 'structure') {
                // êµ¬ì¡°ë‘ ë‹¨ê³„ ë§¤í•‘
                // step 0: ê°„ì§€, step 1: ê°œë…, step 2: ë¹„êµ, step 3: ë¬¸ì¥ì°¾ê¸°
                const stepId = `structure-step-${currentStep}`;
                const stepEl = document.getElementById(stepId);
                if(stepEl) stepEl.style.display = 'flex';
            } 
            updateNavControls();
        }
        function changeStep(direction) {
            const maxSteps = stepsConfig[currentTab];
            let nextStep = currentStep + direction;
            if (nextStep >= 0 && nextStep < maxSteps) {
                currentStep = nextStep;
                updateUI();
            } else {
                if (direction > 0) {
                    if (currentTab === 'vocab') goToTab('read');
                    else if (currentTab === 'read') goToTab('structure');
                    else if (currentTab === 'structure') goToTab('write');
                    else if (currentTab === 'write') goToTab('outro');
                } else {
                    if (currentTab === 'read') goToTab('vocab');
                    else if (currentTab === 'structure') goToTab('read');
                    else if (currentTab === 'write') goToTab('structure');
                }
            }
        }
        function updateNavControls() {
            const navContainer = document.querySelector('.nav-controls');
            const dotsContainer = document.getElementById('dots-container');
            const nextBtn = document.getElementById('next-btn');
            
            // êµ¬ì¡°ë‘ì€ step 0(ê°„ì§€)ì¼ ë•Œ ë„¤ë¹„ê²Œì´ì…˜ ìˆ¨ê¹€
            if (currentTab === 'intro' || currentTab === 'outro' || currentTab === 'home' || (currentTab === 'structure' && currentStep === 0)) { 
                navContainer.style.display = 'none'; 
                return; 
            }
            navContainer.style.display = 'flex';
            
            dotsContainer.innerHTML = '';
            
            if (currentTab !== 'write') {
                const totalSteps = stepsConfig[currentTab];
                // êµ¬ì¡°ë‘ì€ 0ë²ˆì´ ê°„ì§€ì´ë¯€ë¡œ ì  ê°œìˆ˜ ì¡°ì • (ì´ 4ê°œ ì¤‘ ì‹¤ì œ í•™ìŠµ 3ê°œë§Œ ì  í‘œì‹œ)
                const displayStepCount = currentTab === 'structure' ? totalSteps - 1 : totalSteps;
                
                for(let i=0; i<displayStepCount; i++) {
                    const dot = document.createElement('div');
                    // êµ¬ì¡°ë‘ì€ iê°€ currentStep - 1 ê³¼ ê°™ì•„ì•¼ í™œì„±
                    const isActive = currentTab === 'structure' ? (i === currentStep - 1) : (i === currentStep);
                    dot.className = `dot ${isActive ? 'active' : ''}`;
                    dotsContainer.appendChild(dot);
                }
            }
            const stepKey = `${currentTab}-${currentStep}`;
            if (completedSteps[stepKey]) {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true;
            }
        }
        function markStepComplete() {
            const stepKey = `${currentTab}-${currentStep}`;
            completedSteps[stepKey] = true;
            updateNavControls();
        }
        function reveal(element, text, cardIndex, audioSrc) { 
            if (element.classList.contains('revealed')) return; 
            element.textContent = text; 
            element.classList.add('revealed'); 
            
            if(audioSrc) playAudio(audioSrc);
            checkVocabCardCompletion(cardIndex); 
        }
        
        function checkVocabCardCompletion(cardIndex) {
            const hanjaRevealed = document.querySelectorAll(`#vocab-card-${cardIndex} .hanja-reveal.revealed`).length;
            if(hanjaRevealed >= 2) {
                playAudio('https://placehold.co/audio_definition.mp3', function() {
                    playAudio('https://placehold.co/audio_example.mp3');
                });
                if (cardIndex === totalVocabCards) {
                    const doneBtn = document.getElementById('vocab-done-btn');
                    if(doneBtn) doneBtn.disabled = false;
                }
            }
        }
        function updateVocabStars(completedCount) {
            const imgOn = 'imgs/star_on.png'; 
            const imgOff = 'imgs/star_off.png'; 
            const star1 = document.getElementById('header-star-1');
            const star2 = document.getElementById('header-star-2');
            if (star1) star1.src = (completedCount >= 1) ? imgOn : imgOff;
            if (star2) star2.src = (completedCount >= 2) ? imgOn : imgOff;
        }
        function showVocabCard(cardIndex) {
            document.querySelectorAll('.vocab-card').forEach(card => card.style.display = 'none');
            document.getElementById(`vocab-card-${cardIndex}`).style.display = 'flex';
            
            updateVocabStars(cardIndex);
            const doneContainer = document.getElementById('vocab-done-container');
            if (cardIndex === totalVocabCards) {
                doneContainer.style.display = 'flex';
                const hanjaRevealed = document.querySelectorAll(`#vocab-card-${cardIndex} .hanja-reveal.revealed`).length;
                const doneBtn = document.getElementById('vocab-done-btn');
                if(hanjaRevealed >= 2) {
                    doneBtn.disabled = false;
                } else {
                    doneBtn.disabled = true;
                }
            } else {
                doneContainer.style.display = 'none';
            }
            
            lucide.createIcons(); 
        }
        function nextVocabCard() {
            if (currentVocabCard < totalVocabCards) {
                currentVocabCard++;
                showVocabCard(currentVocabCard);
            }
        }
        
        function prevVocabCard() {
            if (currentVocabCard > 1) {
                currentVocabCard--;
                showVocabCard(currentVocabCard);
            }
        }
        function playGame(isCorrect) {
            const arm = document.getElementById('claw-arm');
            const blank = document.querySelector('.quiz-blank');
            arm.style.height = '160px'; 
            
            setTimeout(() => {
                arm.style.height = '50px'; 
                
                setTimeout(() => {
                    if(isCorrect) { 
                        blank.textContent = 'ê°€ì¹˜'; 
                        blank.style.backgroundColor = '#22c55e'; 
                        blank.style.color = 'white'; 
                        alert("ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰"); 
                        markStepComplete(); 
                    } else { 
                        alert("ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”? ğŸ¤”"); 
                    }
                }, 1000);
            }, 1000);
        }
        function revealKeySentence() {
            const bubble = document.getElementById('key-bubble');
            const textContainer = document.getElementById('passage-text');
            
            bubble.style.display = 'block';
            lucide.createIcons();
            setTimeout(() => {
                textContainer.scrollTo({ 
                    top: textContainer.scrollHeight, 
                    behavior: 'smooth' 
                });
            }, 100);
            markStepComplete();
        }
        function checkQuiz(element, isCorrect) {
            if (document.querySelector('.option-item.correct')) return;
            document.querySelectorAll('.option-item').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            if (isCorrect) { element.classList.add('correct'); element.classList.remove('wrong'); document.getElementById('quiz-explanation').classList.add('show'); const qBox = document.querySelector('.question-box'); setTimeout(() => { qBox.scrollTo({ top: qBox.scrollHeight, behavior: 'smooth' }); }, 100); markStepComplete(); } 
            else { element.classList.add('wrong'); setTimeout(() => { element.classList.remove('wrong'); element.classList.remove('selected'); }, 500); }
        }
        function toggleCard(element) { element.classList.add('active'); const flipped = document.querySelectorAll('#structure-step-1 .concept-card.active').length; if(flipped >= 4) markStepComplete(); }
        function toggleDropdown(btn) { const menu = btn.nextElementSibling; menu.classList.toggle('show'); }
        function selectOption(item, isCorrect) {
            const menu = item.parentElement; const btn = menu.previousElementSibling; menu.classList.remove('show');
            if(isCorrect) { btn.textContent = item.textContent; btn.classList.add('correct'); btn.style.color = '#2563eb'; btn.parentElement.style.transform = "scale(1.1)"; setTimeout(() => btn.parentElement.style.transform = "scale(1)", 200); const correctCount = document.querySelectorAll('#structure-step-2 .dropdown-btn.correct').length; if(correctCount >= 4) markStepComplete(); } 
            else { alert("ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³´ì„¸ìš”!"); }
        }
        function checkSentence_old(element, isCorrect) { // Renamed old function to avoid conflict
            if (isCorrect) { element.classList.add('selected-correct'); const correctCount = document.querySelectorAll('.sentence.selected-correct').length; if(correctCount >= 2) { alert("ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘"); markStepComplete(); } } 
            else { element.classList.add('selected-wrong'); alert("ë‹¤ì‹œ ì°¾ì•„ë³¼ê¹Œìš”?"); }
        }
        function openModal(type) { if(type === 'fulltext') document.getElementById('text-modal').classList.add('active'); if(type === 'example') document.getElementById('example-modal').classList.add('active'); }
        function closeModal(id) { document.getElementById(id).classList.remove('active'); }
        
        function checkWriting(textarea) {
            const doneBtn = document.getElementById('write-done-btn');
            if(textarea.value.trim().length > 0) {
                doneBtn.disabled = false;
            } else {
                doneBtn.disabled = true;
            }
        }
        
        function finishWriting() {
            alert("ê¸€ì“°ê¸°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì˜¤ë¥¸ìª½ í™”ì‚´í‘œë¥¼ ëˆŒëŸ¬ í•™ìŠµì„ ë§ˆë¬´ë¦¬í•˜ì„¸ìš”.");
            markStepComplete();
        }
        
        function finishVocabStep1() {
            markStepComplete(); 
            changeStep(1); 
        }
        /* [êµ¬ì¡°ë‘ ë¡œì§ í•¨ìˆ˜ë“¤] */
        // Step 1: ê°œë… ì •ì˜ ì—´ê¸°
        function revealConceptDef(element) {
            const ph = element.querySelector('.def-placeholder');
            const txt = element.querySelector('.def-text');
            if(ph) ph.style.display = 'none';
            if(txt) {
                txt.style.display = 'block';
                txt.style.animation = 'fadeIn 0.5s';
                playAudio('https://placehold.co/audio_correct.mp3'); 
            }
            checkStructStep1();
        }
        // Step 1: ì˜ˆì‹œ ì—´ê¸°
        function revealEx(element, text) {
            if(element.classList.contains('revealed')) return;
            element.innerHTML = text;
            element.classList.add('revealed');
            playAudio('https://placehold.co/audio_correct.mp3');
            checkStructStep1();
        }
        function checkStructStep1() {
            const defOpen = document.querySelector('.def-text') && document.querySelector('.def-text').style.display === 'block';
            const exOpen = document.querySelectorAll('.ex-answer-box.revealed').length;
            if(defOpen && exOpen >= 3) markStepComplete();
        }
        // Step 2: ë“œë¡­ë‹¤ìš´ ì—´ê¸°
        function toggleCpDrop(btn) {
            document.querySelectorAll('.cp-dropdown-list').forEach(el => {
                if(el !== btn.nextElementSibling) el.classList.remove('show');
            });
            btn.nextElementSibling.classList.toggle('show');
        }
        // Step 2: ë“œë¡­ë‹¤ìš´ ì •ë‹µ ì²´í¬
        function checkCpAnswer(option, isCorrect, text) {
            const list = option.parentElement;
            const container = list.parentElement;
            list.classList.remove('show');
            if(isCorrect) {
                container.querySelector('.cp-dropdown-btn').style.display = 'none';
                container.classList.add('correct');
                container.textContent = text;
                playAudio('https://placehold.co/audio_correct.mp3');
                if(document.querySelectorAll('.cp-content.correct').length >= 6) markStepComplete();
            } else {
                playAudio('https://placehold.co/audio_wrong.mp3');
                container.style.animation = 'shake 0.4s';
                setTimeout(() => container.style.animation = '', 400);
            }
        }
        // Step 3: ë¬¸ì¥ ì°¾ê¸° ì²´í¬
        function checkSentence(el, isCorrect) {
            if(el.classList.contains('correct')) return;
            if(isCorrect) {
                el.classList.add('correct');
                playAudio('https://placehold.co/audio_correct.mp3');
                // ì²´í¬ ì•„ì´ì½˜ ì¶”ê°€
                const i = document.createElement('i');
                i.setAttribute('data-lucide', 'check');
                i.style.color='red'; i.style.marginRight='5px';
                el.prepend(i); lucide.createIcons();
                if(document.querySelectorAll('.selectable-sentence.correct').length >= 2) {
                    markStepComplete();
                    alert("ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘");
                }
            } else {
                el.classList.add('wrong');
                playAudio('https://placehold.co/audio_wrong.mp3');
                setTimeout(() => el.classList.remove('wrong'), 500);
            }
        }
        // í™”ë©´ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
        document.addEventListener('click', e => {
            if(!e.target.closest('.cp-content')) {
                document.querySelectorAll('.cp-dropdown-list').forEach(el => el.classList.remove('show'));
            }
        });
        init();
    </script>
</body>
</html>
